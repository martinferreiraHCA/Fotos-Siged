<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de GestiÃ³n de Fotos Estudiantiles</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  </head>
  <body>
    <header>
      <h1>Sistema de GestiÃ³n de Fotos Estudiantiles</h1>
      <p>VersiÃ³n web (GitHub Pages), todo en el navegador.</p>
    </header>

    <main class="layout">
      <aside class="card sidebar">
        <h2>
          InformaciÃ³n
          <button class="help-btn" data-help="panel-info">?</button>
        </h2>
        <p><strong>Grupo actual:</strong> <span id="grupo-actual">No seleccionado</span></p>
        <ul class="stats">
          <li>Total estudiantes: <strong id="stat-total">0</strong></li>
          <li>Con foto: <strong id="stat-con-foto">0</strong></li>
          <li>Pendientes: <strong id="stat-pendientes">0</strong></li>
        </ul>
        <label>Progreso</label>
        <progress id="progress" value="0" max="100"></progress>

        <h3>
          Ãšltima foto
          <button class="help-btn" data-help="ultima-foto">?</button>
        </h3>
        <canvas id="ultima-foto" width="150" height="150"></canvas>
        <p id="ultimo-estudiante">Ninguna foto tomada.</p>

        <h3>Pendientes</h3>
        <ul id="pendientes" class="list compact"></ul>

        <div class="actions-col">
          <button id="btn-asistencia">Imprimir Lista de Asistencia</button>
          <button id="btn-estado">Exportar Estado Actual</button>
          <button id="btn-todos">Exportar Todos los Estudiantes</button>
        </div>
      </aside>

      <section class="card main-panel">
        <div class="controls">
          <div class="row">
            <label for="camara">CÃ¡mara</label>
            <select id="camara"></select>
            <button id="btn-activar">ðŸŽ¥ Activar cÃ¡mara</button>
            <button class="help-btn" data-help="activar-camara">?</button>

            <label for="csv-file">Archivo CSV</label>
            <input id="csv-file" type="file" accept=".csv,text/csv" />
            <button class="help-btn" data-help="cargar-csv">?</button>
          </div>

          <div class="row">
            <label for="grupo">Grupo</label>
            <select id="grupo"></select>
            <button id="btn-seleccionar">âœ… Seleccionar grupo</button>
            <button class="help-btn" data-help="seleccionar-grupo">?</button>

            <label for="buscar">Buscar</label>
            <input id="buscar" type="text" placeholder="Nombre o documento" />
          </div>
        </div>

        <div class="content">
          <div class="camera-block">
            <h3>Vista previa</h3>
            <video id="preview" autoplay playsinline></video>
            <canvas id="captura" width="320" height="240" hidden></canvas>
          </div>

          <div class="students-block">
            <h3>Lista de estudiantes</h3>
            <ul id="estudiantes" class="list"></ul>
          </div>
        </div>

        <footer class="row end">
          <span id="estudiante-actual">Estudiante: Ninguno seleccionado</span>
          <button id="btn-guardar">ðŸ’¾ Guardar foto</button>
          <button class="help-btn" data-help="guardar-foto">?</button>
          <button id="btn-finalizar">ðŸ“¦ Finalizar y generar ZIP</button>
          <button class="help-btn" data-help="comprimir">?</button>
        </footer>
      </section>
    </main>

    <dialog id="help-modal">
      <article>
        <h3 id="help-title">Ayuda</h3>
        <p id="help-body"></p>
        <form method="dialog">
          <button>Cerrar</button>
        </form>
      </article>
    </dialog>

    <script type="module" src="app.js"></script>
  </body>
</html>
